@tailwind base;
@tailwind components;
@tailwind utilities;

/* üéÉ Halloween Tokens */
@layer base {
  :root {
    /* Neutrals */
    --background: 36 33% 98%;        /* bone white */
    --foreground: 24 15% 6%;         /* candle soot */

    --card: 36 33% 98%;
    --card-foreground: 24 15% 6%;

    --popover: 36 33% 98%;
    --popover-foreground: 24 15% 6%;

    /* Brand */
    --primary: 28 92% 50%;           /* pumpkin orange */
    --primary-foreground: 45 100% 98%;

    --secondary: 270 55% 46%;        /* witch purple (surface) */
    --secondary-foreground: 45 100% 98%;

    --muted: 35 20% 94%;
    --muted-foreground: 25 8% 38%;

    --accent: 105 65% 45%;           /* slime green */
    --accent-foreground: 45 100% 98%;

    --destructive: 0 72% 46%;        /* blood red */
    --destructive-foreground: 45 100% 98%;

    --border: 28 20% 88%;
    --input: 28 20% 88%;
    --ring: 28 92% 50%;

    --radius: 0.65rem;

    /* Charts (seasonal palette) */
    --chart-1: 28 92% 50%;  /* pumpkin */
    --chart-2: 270 55% 46%; /* witch */
    --chart-3: 105 65% 45%; /* slime */
    --chart-4: 15 75% 55%;  /* ember */
    --chart-5: 340 70% 55%; /* magenta fog */

    /* Extra theme tokens */
    --halloween-midnight: 260 25% 7%;
    --halloween-mist: 270 30% 12%;
    --halloween-ember: 18 85% 52%;
  }

  .dark {
    --background: 260 25% 7%;          /* midnight */
    --foreground: 45 25% 92%;          /* bone */

    --card: 270 30% 12%;               /* misted violet */
    --card-foreground: 45 25% 92%;

    --popover: 270 30% 12%;
    --popover-foreground: 45 25% 92%;

    --primary: 28 92% 52%;             /* brighter pumpkin */
    --primary-foreground: 45 100% 98%;

    --secondary: 270 35% 18%;
    --secondary-foreground: 45 25% 92%;

    --muted: 265 22% 18%;
    --muted-foreground: 30 12% 68%;

    --accent: 105 65% 46%;             /* slime */
    --accent-foreground: 45 100% 98%;

    --destructive: 0 76% 46%;
    --destructive-foreground: 45 100% 98%;

    --border: 270 22% 22%;
    --input: 270 22% 22%;
    --ring: 28 92% 52%;

    --chart-1: 28 92% 52%;
    --chart-2: 105 65% 46%;
    --chart-3: 270 55% 50%;
    --chart-4: 18 85% 52%;
    --chart-5: 340 70% 58%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground antialiased;
  }
}

/* üï∏Ô∏è Seasonal Utilities */
@layer utilities {
  /* Mobile-first helpers (from your base) */
  .touch-manipulation { touch-action: manipulation; }
  .text-size-adjust-none { -webkit-text-size-adjust: none; text-size-adjust: none; }
  .safe-area-inset-top { padding-top: env(safe-area-inset-top); }
  .safe-area-inset-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-area-inset-left { padding-left: env(safe-area-inset-left); }
  .safe-area-inset-right { padding-right: env(safe-area-inset-right); }
  .scroll-smooth-mobile { -webkit-overflow-scrolling: touch; }

  /* Line clamps */
  .line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
  .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

  /* Themed backdrops */
  .bg-halloween {
    background:
      radial-gradient(1200px 600px at 50% -10%, hsl(var(--primary)/0.18), transparent 60%),
      radial-gradient(800px 400px at 90% 10%, hsl(var(--accent)/0.12), transparent 60%),
      radial-gradient(800px 400px at 10% 15%, hsl(var(--chart-2)/0.12), transparent 60%),
      hsl(var(--background));
  }

  /* Vignette edge darkening for drama */
  .vignette {
    position: relative;
    isolation: isolate;
  }
  .vignette::after {
    content: "";
    position: absolute; inset: -2rem;
    pointer-events: none;
    background: radial-gradient(80% 60% at 50% 40%, transparent 55%, hsl(var(--foreground)/0.35) 100%);
    z-index: -1;
  }

  /* Subtle film grain */
  .grain { position: relative; }
  .grain::before {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    opacity: .08;
    mix-blend-mode: overlay;
    background-image:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.9'/></svg>");
  }

  /* Glows (pumpkin & slime) */
  .glow-orange { box-shadow: 0 0 0.5rem hsl(var(--primary)/.6), 0 0 1.25rem hsl(var(--primary)/.35); }
  .glow-green { box-shadow: 0 0 0.5rem hsl(var(--accent)/.6), 0 0 1.25rem hsl(var(--accent)/.35); }

  /* Spooky underline accent */
  .spooky-underline {
    box-shadow: inset 0 -0.2em 0 0 hsl(var(--primary)/0.35);
  }

  /* Candy stripes (for badges/pills) */
  .candy-stripes {
    background-image: repeating-linear-gradient(
      45deg,
      hsl(var(--primary)/.18) 0,
      hsl(var(--primary)/.18) 8px,
      transparent 8px,
      transparent 16px
    );
  }

  /* Web border (section dividers) */
  .web-border {
    background:
      radial-gradient(circle at 10% 0%, hsl(var(--muted-foreground)/.08) 0 2px, transparent 2px) 0 0/16px 16px,
      radial-gradient(circle at 90% 100%, hsl(var(--muted-foreground)/.08) 0 2px, transparent 2px) 0 0/16px 16px;
  }

  /* Animated ember ring (focus/CTA) */
  .ring-ember {
    box-shadow:
      0 0 0 2px hsl(var(--ring)/.45),
      0 0 25px hsl(var(--primary)/.25),
      inset 0 0 12px hsl(var(--primary)/.15);
  }

  /* Quick seasonal buttons/cards */
  .btn-halloween {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-[var(--radius)] font-medium touch-manipulation;
    background: linear-gradient(180deg, hsl(var(--primary)) 0%, hsl(var(--primary)/.9) 100%);
    color: hsl(var(--primary-foreground));
    box-shadow: 0 8px 20px -10px hsl(var(--primary)/.6);
  }
  .btn-halloween:hover { filter: brightness(1.05); }
  .btn-halloween:active { transform: translateY(1px); }

  .btn-ghost {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-[var(--radius)] font-medium;
    background: transparent;
    color: hsl(var(--accent-foreground));
    border: 1px solid hsl(var(--accent)/.5);
    box-shadow: 0 6px 16px -12px hsl(var(--accent)/.6);
  }
  .btn-ghost:hover { background: hsl(var(--accent)/.08); }

  .card-spooky {
    @apply rounded-[calc(var(--radius)+2px)] p-4;
    background:
      radial-gradient(100% 80% at 0% 0%, hsl(var(--primary)/.08), transparent 60%),
      radial-gradient(100% 80% at 100% 0%, hsl(var(--accent)/.08), transparent 60%),
      hsl(var(--card));
    border: 1px solid hsl(var(--border));
  }

  /* Trick-or-treat hover pair */
  .hover-trick:hover { transform: translateY(-1px) scale(1.01); }
  .hover-treat:hover { filter: saturate(1.1) contrast(1.02); }

  /* Utility to set CSS vars via classes if needed */
  .theme-pumpkin { --ring: var(--primary); }
  .theme-slime { --ring: 105 65% 46%; }
}
